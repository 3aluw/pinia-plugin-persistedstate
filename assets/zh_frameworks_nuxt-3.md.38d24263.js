import{_ as s,c as n,o as a,a as p}from"./app.c9630f5f.js";const B=JSON.parse('{"title":"在 Nuxt 3 中使用","description":"","frontmatter":{},"headers":[{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":2,"title":"用法","slug":"用法","link":"#用法","children":[]},{"level":2,"title":"选择 storage","slug":"选择-storage","link":"#选择-storage","children":[{"level":3,"title":"localStorage","slug":"localstorage","link":"#localstorage","children":[]},{"level":3,"title":"sessionStorage","slug":"sessionstorage","link":"#sessionstorage","children":[]},{"level":3,"title":"cookiesWithOptions","slug":"cookieswithoptions","link":"#cookieswithoptions","children":[]}]},{"level":2,"title":"全局配置","slug":"全局配置","link":"#全局配置","children":[]}],"relativePath":"zh/frameworks/nuxt-3.md","lastUpdated":1674768061000}'),l={name:"zh/frameworks/nuxt-3.md"},o=p(`<h1 id="在-nuxt-3-中使用" tabindex="-1">在 Nuxt 3 中使用 <a class="header-anchor" href="#在-nuxt-3-中使用" aria-hidden="true">#</a></h1><p>我们提供的专用模块使得在 Nuxt 中持久化 Pinia Store 变得更加容易。</p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-hidden="true">#</a></h2><ol><li><p>使用你喜欢的包管理器安装依赖：</p><ul><li>pnpm:</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">pnpm</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">-D</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">@pinia-plugin-persistedstate/nuxt</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">pnpm</span><span style="color:#393A34;"> </span><span style="color:#B56959;">i</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">-D</span><span style="color:#393A34;"> </span><span style="color:#B56959;">@pinia-plugin-persistedstate/nuxt</span></span>
<span class="line"></span></code></pre></div><ul><li>npm:</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">npm</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">-D</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">@pinia-plugin-persistedstate/nuxt</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">npm</span><span style="color:#393A34;"> </span><span style="color:#B56959;">i</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">-D</span><span style="color:#393A34;"> </span><span style="color:#B56959;">@pinia-plugin-persistedstate/nuxt</span></span>
<span class="line"></span></code></pre></div><ul><li>yarn:</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">yarn</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">add</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">-D</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">@pinia-plugin-persistedstate/nuxt</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">yarn</span><span style="color:#393A34;"> </span><span style="color:#B56959;">add</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">-D</span><span style="color:#393A34;"> </span><span style="color:#B56959;">@pinia-plugin-persistedstate/nuxt</span></span>
<span class="line"></span></code></pre></div></li><li><p>将模块添加到 Nuxt 配置中 (<code>nuxt.config.ts</code>)：</p></li></ol><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">defineNuxtConfig</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#B8A965;">modules</span><span style="color:#666666;">: [</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">@pinia/nuxt</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">, </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">@pinia-plugin-persistedstate/nuxt</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#666666;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">default</span><span style="color:#393A34;"> </span><span style="color:#59873A;">defineNuxtConfig</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#998418;">modules</span><span style="color:#999999;">: [</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">@pinia/nuxt</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">, </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">@pinia-plugin-persistedstate/nuxt</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#999999;">})</span></span>
<span class="line"></span></code></pre></div><h2 id="用法" tabindex="-1">用法 <a class="header-anchor" href="#用法" aria-hidden="true">#</a></h2><p>创建 Store 时，将 <code>persist</code> 选项设置为 <code>true</code>。</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">defineStore</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">pinia</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#CB7676;"> const </span><span style="color:#BD976A;">useStore</span><span style="color:#CB7676;"> = </span><span style="color:#80A665;">defineStore</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">main</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#CB7676;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#80A665;">state</span><span style="color:#666666;">: () =&gt; {</span></span>
<span class="line"><span style="color:#666666;">		</span><span style="color:#4D9375;">return</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#666666;">			</span><span style="color:#B8A965;">someState</span><span style="color:#666666;">: </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">你好 pinia</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">		}</span></span>
<span class="line"><span style="color:#666666;">	},</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#B8A965;">persist</span><span style="color:#666666;">: </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">defineStore</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#AB5959;"> const </span><span style="color:#B07D48;">useStore</span><span style="color:#AB5959;"> = </span><span style="color:#59873A;">defineStore</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">main</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#59873A;">state</span><span style="color:#999999;">: () =&gt; {</span></span>
<span class="line"><span style="color:#999999;">		</span><span style="color:#1E754F;">return</span><span style="color:#999999;"> {</span></span>
<span class="line"><span style="color:#999999;">			</span><span style="color:#998418;">someState</span><span style="color:#999999;">: </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">你好 pinia</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">		}</span></span>
<span class="line"><span style="color:#999999;">	},</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#998418;">persist</span><span style="color:#999999;">: </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">})</span></span>
<span class="line"></span></code></pre></div><h2 id="选择-storage" tabindex="-1">选择 storage <a class="header-anchor" href="#选择-storage" aria-hidden="true">#</a></h2><p>默认情况下，你的 Store 将被保存在 cookie 中（在底层使用 Nuxt 的 <a href="https://nuxt.com/docs/api/composables/use-cookie" target="_blank" rel="noreferrer"><code>useCookie</code></a>）。你可以通过使用自动导入的 <code>persistedState</code> 变量下的可用 storage 来配置你想要使用的 storage。</p><div class="info custom-block"><p class="custom-block-title">提示</p><p>使用 <code>persistedState</code> 所提供的 storage 以外的其他 storage 可能会导致意外。</p></div><h3 id="localstorage" tabindex="-1"><code>localStorage</code> <a class="header-anchor" href="#localstorage" aria-hidden="true">#</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">defineStore</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">pinia</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#CB7676;"> const </span><span style="color:#BD976A;">useStore</span><span style="color:#CB7676;"> = </span><span style="color:#80A665;">defineStore</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">main</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#CB7676;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#80A665;">state</span><span style="color:#666666;">: () =&gt; {</span></span>
<span class="line"><span style="color:#666666;">		</span><span style="color:#4D9375;">return</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#666666;">			</span><span style="color:#B8A965;">someState</span><span style="color:#666666;">: </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">你好 pinia</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">		}</span></span>
<span class="line"><span style="color:#666666;">	},</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#B8A965;">persist</span><span style="color:#666666;">: {</span></span>
<span class="line"><span style="color:#666666;">		</span><span style="color:#B8A965;">storage</span><span style="color:#666666;">: </span><span style="color:#BD976A;">persistedState</span><span style="color:#666666;">.</span><span style="color:#BD976A;">localStorage</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">	},</span></span>
<span class="line"><span style="color:#666666;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">defineStore</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#AB5959;"> const </span><span style="color:#B07D48;">useStore</span><span style="color:#AB5959;"> = </span><span style="color:#59873A;">defineStore</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">main</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#59873A;">state</span><span style="color:#999999;">: () =&gt; {</span></span>
<span class="line"><span style="color:#999999;">		</span><span style="color:#1E754F;">return</span><span style="color:#999999;"> {</span></span>
<span class="line"><span style="color:#999999;">			</span><span style="color:#998418;">someState</span><span style="color:#999999;">: </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">你好 pinia</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">		}</span></span>
<span class="line"><span style="color:#999999;">	},</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#998418;">persist</span><span style="color:#999999;">: {</span></span>
<span class="line"><span style="color:#999999;">		</span><span style="color:#998418;">storage</span><span style="color:#999999;">: </span><span style="color:#B07D48;">persistedState</span><span style="color:#999999;">.</span><span style="color:#B07D48;">localStorage</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">	},</span></span>
<span class="line"><span style="color:#999999;">})</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">警告</p><p><code>localStorage</code> 仅限客户端。</p></div><h3 id="sessionstorage" tabindex="-1"><code>sessionStorage</code> <a class="header-anchor" href="#sessionstorage" aria-hidden="true">#</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">defineStore</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">pinia</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#CB7676;"> const </span><span style="color:#BD976A;">useStore</span><span style="color:#CB7676;"> = </span><span style="color:#80A665;">defineStore</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">main</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#CB7676;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#80A665;">state</span><span style="color:#666666;">: () =&gt; {</span></span>
<span class="line"><span style="color:#666666;">		</span><span style="color:#4D9375;">return</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#666666;">			</span><span style="color:#B8A965;">someState</span><span style="color:#666666;">: </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">你好 pinia</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">		}</span></span>
<span class="line"><span style="color:#666666;">	},</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#B8A965;">persist</span><span style="color:#666666;">: {</span></span>
<span class="line"><span style="color:#666666;">		</span><span style="color:#B8A965;">storage</span><span style="color:#666666;">: </span><span style="color:#BD976A;">persistedState</span><span style="color:#666666;">.</span><span style="color:#BD976A;">sessionStorage</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">	},</span></span>
<span class="line"><span style="color:#666666;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">defineStore</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#AB5959;"> const </span><span style="color:#B07D48;">useStore</span><span style="color:#AB5959;"> = </span><span style="color:#59873A;">defineStore</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">main</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#59873A;">state</span><span style="color:#999999;">: () =&gt; {</span></span>
<span class="line"><span style="color:#999999;">		</span><span style="color:#1E754F;">return</span><span style="color:#999999;"> {</span></span>
<span class="line"><span style="color:#999999;">			</span><span style="color:#998418;">someState</span><span style="color:#999999;">: </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">你好 pinia</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">		}</span></span>
<span class="line"><span style="color:#999999;">	},</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#998418;">persist</span><span style="color:#999999;">: {</span></span>
<span class="line"><span style="color:#999999;">		</span><span style="color:#998418;">storage</span><span style="color:#999999;">: </span><span style="color:#B07D48;">persistedState</span><span style="color:#999999;">.</span><span style="color:#B07D48;">sessionStorage</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">	},</span></span>
<span class="line"><span style="color:#999999;">})</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">警告</p><p><code>sessionStorage</code> 仅限客户端。</p></div><h3 id="cookieswithoptions" tabindex="-1"><code>cookiesWithOptions</code> <a class="header-anchor" href="#cookieswithoptions" aria-hidden="true">#</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">defineStore</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">pinia</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#CB7676;"> const </span><span style="color:#BD976A;">useStore</span><span style="color:#CB7676;"> = </span><span style="color:#80A665;">defineStore</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">main</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#CB7676;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#80A665;">state</span><span style="color:#666666;">: () =&gt; {</span></span>
<span class="line"><span style="color:#666666;">		</span><span style="color:#4D9375;">return</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#666666;">			</span><span style="color:#B8A965;">someState</span><span style="color:#666666;">: </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">你好 pinia</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">		}</span></span>
<span class="line"><span style="color:#666666;">	},</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#B8A965;">persist</span><span style="color:#666666;">: {</span></span>
<span class="line"><span style="color:#666666;">		</span><span style="color:#B8A965;">storage</span><span style="color:#666666;">: </span><span style="color:#BD976A;">persistedState</span><span style="color:#666666;">.</span><span style="color:#80A665;">cookiesWithOptions</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#666666;">			</span><span style="color:#B8A965;">sameSite</span><span style="color:#666666;">: </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">strict</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">		}),</span></span>
<span class="line"><span style="color:#666666;">	},</span></span>
<span class="line"><span style="color:#666666;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">defineStore</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#AB5959;"> const </span><span style="color:#B07D48;">useStore</span><span style="color:#AB5959;"> = </span><span style="color:#59873A;">defineStore</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">main</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#59873A;">state</span><span style="color:#999999;">: () =&gt; {</span></span>
<span class="line"><span style="color:#999999;">		</span><span style="color:#1E754F;">return</span><span style="color:#999999;"> {</span></span>
<span class="line"><span style="color:#999999;">			</span><span style="color:#998418;">someState</span><span style="color:#999999;">: </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">你好 pinia</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">		}</span></span>
<span class="line"><span style="color:#999999;">	},</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#998418;">persist</span><span style="color:#999999;">: {</span></span>
<span class="line"><span style="color:#999999;">		</span><span style="color:#998418;">storage</span><span style="color:#999999;">: </span><span style="color:#B07D48;">persistedState</span><span style="color:#999999;">.</span><span style="color:#59873A;">cookiesWithOptions</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#999999;">			</span><span style="color:#998418;">sameSite</span><span style="color:#999999;">: </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">strict</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">		}),</span></span>
<span class="line"><span style="color:#999999;">	},</span></span>
<span class="line"><span style="color:#999999;">})</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>使用 <code>cookiesWithOptions()</code> 允许你<a href="https://nuxt.com/docs/api/composables/use-cookie#options" target="_blank" rel="noreferrer">配置 cookies</a>。不传递任何选项将默认与使用 <code>cookies</code> 相同。</p></div><h2 id="全局配置" tabindex="-1">全局配置 <a class="header-anchor" href="#全局配置" aria-hidden="true">#</a></h2><p>该模块接受在 <code>piniaPersistedstate</code> 下定义在 <code>nuxt.config.ts</code> 中的一些选项</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">defineNuxtConfig</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#B8A965;">modules</span><span style="color:#666666;">: [</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">@pinia/nuxt</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">, </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">@pinia-plugin-persistedstate/nuxt</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#666666;">	</span><span style="color:#B8A965;">piniaPersistedstate</span><span style="color:#666666;">: {</span></span>
<span class="line"><span style="color:#666666;">		</span><span style="color:#B8A965;">cookieOptions</span><span style="color:#666666;">: {</span></span>
<span class="line"><span style="color:#666666;">			</span><span style="color:#B8A965;">sameSite</span><span style="color:#666666;">: </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">strict</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">		},</span></span>
<span class="line"><span style="color:#666666;">		</span><span style="color:#B8A965;">storage</span><span style="color:#666666;">: </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">localStorage</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">	},</span></span>
<span class="line"><span style="color:#666666;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">default</span><span style="color:#393A34;"> </span><span style="color:#59873A;">defineNuxtConfig</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#998418;">modules</span><span style="color:#999999;">: [</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">@pinia/nuxt</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">, </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">@pinia-plugin-persistedstate/nuxt</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#999999;">	</span><span style="color:#998418;">piniaPersistedstate</span><span style="color:#999999;">: {</span></span>
<span class="line"><span style="color:#999999;">		</span><span style="color:#998418;">cookieOptions</span><span style="color:#999999;">: {</span></span>
<span class="line"><span style="color:#999999;">			</span><span style="color:#998418;">sameSite</span><span style="color:#999999;">: </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">strict</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">		},</span></span>
<span class="line"><span style="color:#999999;">		</span><span style="color:#998418;">storage</span><span style="color:#999999;">: </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">localStorage</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">	},</span></span>
<span class="line"><span style="color:#999999;">})</span></span>
<span class="line"></span></code></pre></div><ul><li><code>storage</code>：持久化默认使用的 storage (<code>&#39;localStorage&#39;</code>, <code>&#39;sessionStorage&#39;</code> 或 <code>&#39;cookies&#39;</code>)。</li><li><code>cookieOptions</code>：默认 <a href="https://nuxt.com/docs/api/composables/use-cookie#options" target="_blank" rel="noreferrer">cookie 选项</a>（仅在使用 cookie 持久化时可用）。</li><li><code>debug</code>：详见 <a href="/pinia-plugin-persistedstate/zh/guide/config.html#debug"><code>debug</code></a>.</li></ul>`,24),e=[o];function t(c,r,y,i,A,d){return a(),n("div",null,e)}const u=s(l,[["render",t]]);export{B as __pageData,u as default};
