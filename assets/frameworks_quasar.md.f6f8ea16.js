import{_ as s,c as a,o as n,a as p}from"./app.43893de8.js";const C=JSON.parse('{"title":"Usage With Quasar 2","description":"","frontmatter":{},"headers":[{"level":2,"title":"SSR-enabled persistence","slug":"ssr-enabled-persistence"},{"level":2,"title":"WebStorage persistence","slug":"webstorage-persistence"}],"relativePath":"frameworks/quasar.md","lastUpdated":1660590168000}'),l={name:"frameworks/quasar.md"},o=p(`<h1 id="usage-with-quasar-2" tabindex="-1">Usage With Quasar 2 <a class="header-anchor" href="#usage-with-quasar-2" aria-hidden="true">#</a></h1><p>The plugin provides a factory functions to make integration with Quasar easy.</p><h2 id="ssr-enabled-persistence" tabindex="-1">SSR-enabled persistence <a class="header-anchor" href="#ssr-enabled-persistence" aria-hidden="true">#</a></h2><p>Using the Cookies plugin from Quasar allows for persistence with full SSR support.<br> Enable the <code>Cookies</code> plugin in the Quasar config:</p><div class="language-js"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">// quasar.config.js</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">configure</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">require</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&#39;quasar/wrappers&#39;</span><span style="color:#858585;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E0A569;">module</span><span style="color:#858585;">.</span><span style="color:#E0A569;">exports</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">configure</span><span style="color:#858585;">(</span><span style="color:#CB7676;">function</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">()</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#858585;">    </span><span style="color:#758575;">//...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">framework</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#E0A569;">plugins</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#C98A7D;">&#39;Cookies&#39;</span><span style="color:#858585;">],</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#858585;">    </span><span style="color:#758575;">//...</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#858585;">});</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// quasar.config.js</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">configure</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#B58451;">require</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&#39;quasar/wrappers&#39;</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B58451;">module</span><span style="color:#8E8F8B;">.</span><span style="color:#B58451;">exports</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">configure</span><span style="color:#8E8F8B;">(</span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#8E8F8B;">    </span><span style="color:#A0ADA0;">//...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">framework</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B58451;">plugins</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#B56959;">&#39;Cookies&#39;</span><span style="color:#8E8F8B;">],</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8E8F8B;">    </span><span style="color:#A0ADA0;">//...</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span></code></pre></div><p>And add the plugin to the pinia instance declared in <code>src/stores/index.ts</code>:</p><div class="language-ts"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">// /src/stores/index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">store</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;quasar/wrappers&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">Cookies</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;quasar&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">createPinia</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;pinia&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">createQuasarCookiesPersistedState</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;pinia-plugin-persistedstate/quasar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">store</span><span style="color:#858585;">(({</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">ssrContext</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">})</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">pinia</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">createPinia</span><span style="color:#858585;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">cookies</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">process</span><span style="color:#858585;">.</span><span style="color:#B8A965;">env</span><span style="color:#858585;">.</span><span style="color:#D4976C;">SERVER</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">Cookies</span><span style="color:#858585;">.</span><span style="color:#A1B567;">parseSSR</span><span style="color:#858585;">(</span><span style="color:#B8A965;">ssrContext</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">Cookies</span><span style="color:#858585;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#B8A965;">pinia</span><span style="color:#858585;">.</span><span style="color:#A1B567;">use</span><span style="color:#858585;">(</span><span style="color:#A1B567;">createQuasarCookiesPersistedState</span><span style="color:#858585;">(</span><span style="color:#B8A965;">cookies</span><span style="color:#858585;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">pinia</span></span>
<span class="line"><span style="color:#858585;">})</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// /src/stores/index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">store</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;quasar/wrappers&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">Cookies</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;quasar&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">createPinia</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;pinia&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">createQuasarCookiesPersistedState</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;pinia-plugin-persistedstate/quasar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">export</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">default</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">store</span><span style="color:#8E8F8B;">(({</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">ssrContext</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">})</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">pinia</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">createPinia</span><span style="color:#8E8F8B;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">cookies</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">process</span><span style="color:#8E8F8B;">.</span><span style="color:#8C862B;">env</span><span style="color:#8E8F8B;">.</span><span style="color:#A65E2B;">SERVER</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">?</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">Cookies</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">parseSSR</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">ssrContext</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">:</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">Cookies</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8C862B;">pinia</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">use</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">createQuasarCookiesPersistedState</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">cookies</span><span style="color:#8E8F8B;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">pinia</span></span>
<span class="line"><span style="color:#8E8F8B;">})</span></span>
<span class="line"></span></code></pre></div><p><code>createQuasarCookiesPersistedState</code> accepts <a href="/pinia-plugin-persistedstate/guide/advanced.html#global-persistence-options">global options</a> as third parameter with the following options available:</p><ul><li><a href="/pinia-plugin-persistedstate/guide/config.html#serializer"><code>serializer</code></a></li><li><a href="/pinia-plugin-persistedstate/guide/config.html#beforeRestore"><code>beforeRestore</code></a></li><li><a href="/pinia-plugin-persistedstate/guide/config.html#afterRestore"><code>afterRestore</code></a></li><li><code>cookieOptions</code></li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><p>You can specify the <a href="https://quasar.dev/quasar-plugins/cookies#option-path" target="_blank" rel="noopener noreferrer">cookie options</a> to the <code>cookieOptions</code> property:</p><div class="language-ts"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">store</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;quasar/wrappers&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">Cookies</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;quasar&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">createPinia</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;pinia&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">createQuasarCookiesPersistedState</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;pinia-plugin-persistedstate/quasar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">store</span><span style="color:#858585;">(({</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">ssrContext</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">})</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">pinia</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">createPinia</span><span style="color:#858585;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">cookies</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">process</span><span style="color:#858585;">.</span><span style="color:#B8A965;">env</span><span style="color:#858585;">.</span><span style="color:#D4976C;">SERVER</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">Cookies</span><span style="color:#858585;">.</span><span style="color:#A1B567;">parseSSR</span><span style="color:#858585;">(</span><span style="color:#B8A965;">ssrContext</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">Cookies</span><span style="color:#858585;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#B8A965;">pinia</span><span style="color:#858585;">.</span><span style="color:#A1B567;">use</span><span style="color:#858585;">(</span><span style="color:#A1B567;">createQuasarCookiesPersistedState</span><span style="color:#858585;">(</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#B8A965;">cookies</span><span style="color:#858585;">,</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#E0A569;">cookieOptions</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#E0A569;">expires</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">3600</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#E0A569;">maxAge</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">3600</span><span style="color:#858585;">,</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#E0A569;">sameSite</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;strict&#39;</span><span style="color:#858585;">,</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">pinia</span></span>
<span class="line"><span style="color:#858585;">})</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">store</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;quasar/wrappers&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">Cookies</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;quasar&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">createPinia</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;pinia&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">createQuasarCookiesPersistedState</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;pinia-plugin-persistedstate/quasar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">export</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">default</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">store</span><span style="color:#8E8F8B;">(({</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">ssrContext</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">})</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">pinia</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">createPinia</span><span style="color:#8E8F8B;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">cookies</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">process</span><span style="color:#8E8F8B;">.</span><span style="color:#8C862B;">env</span><span style="color:#8E8F8B;">.</span><span style="color:#A65E2B;">SERVER</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">?</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">Cookies</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">parseSSR</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">ssrContext</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">:</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">Cookies</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8C862B;">pinia</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">use</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">createQuasarCookiesPersistedState</span><span style="color:#8E8F8B;">(</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">cookies</span><span style="color:#8E8F8B;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B58451;">cookieOptions</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B58451;">expires</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">3600</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B58451;">maxAge</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">3600</span><span style="color:#8E8F8B;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B58451;">sameSite</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;strict&#39;</span><span style="color:#8E8F8B;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">pinia</span></span>
<span class="line"><span style="color:#8E8F8B;">})</span></span>
<span class="line"></span></code></pre></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Overriding the <code>storage</code> option in a store will break its server-side persistence/rehydration with cookies.</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>If you need it, you can also add the plugin from a <a href="https://quasar.dev/quasar-cli-vite/boot-files" target="_blank" rel="noopener noreferrer">boot file</a> instead:</p><div class="language-ts"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">// /boot/persistedstate.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">boot</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;quasar/wrappers&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">Cookies</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;quasar&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#B8A965;">createQuasarCookiesPersistedState</span><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;pinia-plugin-persistedstate/quasar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">boot</span><span style="color:#858585;">(({</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">store</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">ssrContext</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">})</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#B8A965;">store</span><span style="color:#858585;">.</span><span style="color:#A1B567;">use</span><span style="color:#858585;">(</span><span style="color:#A1B567;">createQuasarCookiesPersistedState</span><span style="color:#858585;">(</span><span style="color:#B8A965;">Cookies</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">ssrContext</span><span style="color:#858585;">))</span></span>
<span class="line"><span style="color:#858585;">})</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// /boot/persistedstate.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">boot</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;quasar/wrappers&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">Cookies</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;quasar&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8C862B;">createQuasarCookiesPersistedState</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;pinia-plugin-persistedstate/quasar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">export</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">default</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">boot</span><span style="color:#8E8F8B;">(({</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">store</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">ssrContext</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">})</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8C862B;">store</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">use</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">createQuasarCookiesPersistedState</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">Cookies</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">ssrContext</span><span style="color:#8E8F8B;">))</span></span>
<span class="line"><span style="color:#8E8F8B;">})</span></span>
<span class="line"></span></code></pre></div><p>Don&#39;t forget to declare the boot file in the Quasar config.</p></div><h2 id="webstorage-persistence" tabindex="-1">WebStorage persistence <a class="header-anchor" href="#webstorage-persistence" aria-hidden="true">#</a></h2><p>While <code>localStorage</code> and <code>sessionStorage</code> should work out of the box, you can also use Quasar&#39;s <a href="https://quasar.dev/quasar-plugins/web-storage" target="_blank" rel="noopener noreferrer"><code>WebStorage</code></a> plugins:</p><div class="language-ts"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">// /src/stores/index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">store</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;quasar/wrappers&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">LocalStorage</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;quasar&#39;</span></span>
<span class="line"><span style="color:#758575;">// import { SessionStorage } from &#39;quasar&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">createPinia</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;pinia&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">createQuasarWebStoragePersistedState</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;pinia-plugin-persistedstate/quasar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">store</span><span style="color:#858585;">(()</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">pinia</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">createPinia</span><span style="color:#858585;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#B8A965;">pinia</span><span style="color:#858585;">.</span><span style="color:#A1B567;">use</span><span style="color:#858585;">(</span><span style="color:#A1B567;">createQuasarWebStoragePersistedState</span><span style="color:#858585;">(</span><span style="color:#B8A965;">LocalStorage</span><span style="color:#858585;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#858585;">  </span><span style="color:#758575;">// or for SessionStorage</span></span>
<span class="line"><span style="color:#858585;">  </span><span style="color:#758575;">// pinia.use(createQuasarWebStoragePersistedState(sessionStorage))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">pinia</span></span>
<span class="line"><span style="color:#858585;">})</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// /src/stores/index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">store</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;quasar/wrappers&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">LocalStorage</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;quasar&#39;</span></span>
<span class="line"><span style="color:#A0ADA0;">// import { SessionStorage } from &#39;quasar&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">createPinia</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;pinia&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">createQuasarWebStoragePersistedState</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;pinia-plugin-persistedstate/quasar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">export</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">default</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">store</span><span style="color:#8E8F8B;">(()</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">pinia</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">createPinia</span><span style="color:#8E8F8B;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8C862B;">pinia</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">use</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">createQuasarWebStoragePersistedState</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">LocalStorage</span><span style="color:#8E8F8B;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8E8F8B;">  </span><span style="color:#A0ADA0;">// or for SessionStorage</span></span>
<span class="line"><span style="color:#8E8F8B;">  </span><span style="color:#A0ADA0;">// pinia.use(createQuasarWebStoragePersistedState(sessionStorage))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">pinia</span></span>
<span class="line"><span style="color:#8E8F8B;">})</span></span>
<span class="line"></span></code></pre></div><p>Just make sure the <code>LocalStorage</code>/<code>WebStorage</code> plugin is enabled in the Quasar config.</p>`,16),e=[o];function r(t,c,y,i,B,A){return n(),a("div",null,e)}var d=s(l,[["render",r]]);export{C as __pageData,d as default};
